-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE public.candidates
(
    "userId" integer NOT NULL,
    "firstName" character varying(50)[] NOT NULL,
    "lastName" character varying(50)[] NOT NULL,
    "nationalityId" character(11)[] NOT NULL,
    "dateofBirth" date NOT NULL,
    "eMail" character varying(50) NOT NULL,
    password character varying(20) NOT NULL,
    PRIMARY KEY ("userId")
);

CREATE TABLE public."eMailVerifications"
(
    id integer NOT NULL,
    "userId" integer NOT NULL,
    "isEMailVerification" boolean NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE public.employers
(
    "userId" integer NOT NULL,
    "companyName" character varying(250) NOT NULL,
    "webSite" character varying(250) NOT NULL,
    "eMail" character varying(50) NOT NULL,
    "phoneNumber" character(11)[] NOT NULL,
    password character varying(20),
    PRIMARY KEY ("userId")
);

CREATE TABLE public."jobTitles"
(
    id integer NOT NULL,
    "userId" integer NOT NULL,
    name character varying NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE public."mernisVerifications"
(
    id integer NOT NULL,
    "userId" integer NOT NULL,
    "isMernisVerification" boolean NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE public.personel
(
    "userId" integer NOT NULL,
    "firstName" character varying(50) NOT NULL,
    "lastName" character varying(50) NOT NULL,
    "eMail" character varying(50) NOT NULL,
    password character varying(20) NOT NULL,
    PRIMARY KEY ("userId")
);

CREATE TABLE public."personelVerifications"
(
    id integer NOT NULL,
    "employersId" integer NOT NULL,
    "personelId" integer NOT NULL,
    "isVerification" boolean NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE public.users
(
    id integer NOT NULL,
    "userNo" character(10) NOT NULL,
    PRIMARY KEY (id)
);

ALTER TABLE public.candidates
    ADD FOREIGN KEY ("userId")
    REFERENCES public."eMailVerifications" ("userId")
    NOT VALID;


ALTER TABLE public.candidates
    ADD FOREIGN KEY ("userId")
    REFERENCES public."mernisVerifications" ("userId")
    NOT VALID;


ALTER TABLE public.employers
    ADD FOREIGN KEY ("userId")
    REFERENCES public."eMailVerifications" ("userId")
    NOT VALID;


ALTER TABLE public.employers
    ADD FOREIGN KEY ("userId")
    REFERENCES public."jobTitles" ("userId")
    NOT VALID;


ALTER TABLE public.employers
    ADD FOREIGN KEY ("userId")
    REFERENCES public."personelVerifications" ("employersId")
    NOT VALID;


ALTER TABLE public."jobTitles"
    ADD FOREIGN KEY (id)
    REFERENCES public.employers ("userId")
    NOT VALID;


ALTER TABLE public.personel
    ADD FOREIGN KEY ("userId")
    REFERENCES public."jobTitles" ("userId")
    NOT VALID;


ALTER TABLE public."personelVerifications"
    ADD FOREIGN KEY ("personelId")
    REFERENCES public.personel ("userId")
    NOT VALID;


ALTER TABLE public.users
    ADD FOREIGN KEY (id)
    REFERENCES public.candidates ("userId")
    NOT VALID;


ALTER TABLE public.users
    ADD FOREIGN KEY (id)
    REFERENCES public.personel ("userId")
    NOT VALID;


ALTER TABLE public.users
    ADD FOREIGN KEY (id)
    REFERENCES public.employers ("userId")
    NOT VALID;

END;